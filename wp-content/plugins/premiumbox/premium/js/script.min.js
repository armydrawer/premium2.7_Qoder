jQuery(function(b){var y={id:"",window_class:"",insert_div:"",close_class:"",title:"",content:"",scrollContent:"",shadow:1,draggable:1,enable_button:0,out_close:0,button_title:"",button_class:"",before:function(){},after:function(){},close_after:function(){}};b.fn.JsWindow=function(t,n){var n=b.extend({},y,void 0,n),i=b(this),o=b.trim(n.id),s=(o.length||(o=Math.floor(1e5*Math.random())+1),b.trim(n.window_class)),d=b.trim(n.insert_div),d=d.length?b(d):b("body"),e=b.trim(n.close_class),a=parseInt(b.trim(n.shadow)),w=parseInt(b.trim(n.draggable)),c=parseInt(b.trim(n.enable_button)),l=parseInt(b.trim(n.out_close)),r=b.trim(n.button_title),_=b.trim(n.button_class),h=b.trim(n.title),u=b.trim(n.content),v=b.trim(n.scrollContent),f=n.before,m=n.after,p=n.close_after;function g(){var t=b(window).height()-40,n=Math.ceil((b(window).height()-b(".standart_window").height())/2),i=(n<1&&(n=20),Math.ceil((b(window).width()-b(".standart_window").width())/2));i<1&&(i=0),b(".standart_window:not(.dragged)").css({top:n,left:i}),b(".standart_window").css({"max-height":t,"overflow-y":"auto"})}return f.apply(null,[i]),b(".js_techwindow").remove(),"show"===t&&(a&&(d.append('<div class="standart_shadow js_techwindow" id="sh_techwindow_'+o+'"></div>'),b(".standart_shadow").show()),n=v.length?`<div class="standart_window_scrollcontent">${v}</div>`:"",d.append(`
                <div class="standart_window ${s} js_techwindow" id="techwindow_${o}">
                    <div class="standart_windowins">
                        <div class="standart_window_ins">
                            <div class="standart_window_title">
                                <div class="standart_window_close js_window_close ${e}"></div>
                                <div class="standart_window_title_ins">${h}</div>
                            </div>
                            
                            <div class="standart_window_content">
                                <div class="standart_window_content_ins">
                                    ${u}
                                    <div class="standart_window_clear"></div>
                                </div>
                            </div>
                            
                            ${n}
                            ${c?`<div class="standart_window_submit"><input type="submit" class="standart_window_button ${_}" name="" value="${r}" /></div>`:""}
                        </div>
                    </div>
                </div>
            `),b("#techwindow_"+o).show(),g(),b("#techwindow_"+o).find("img").each(function(){this.complete?g():(b(this).one("load",g),b(this).one("error",g))}),w&&"function"==typeof jQuery&&"ui"in jQuery&&jQuery.ui&&"version"in jQuery.ui&&b("#techwindow_"+o).draggable({handle:".standart_window_title",start:function(){b("#techwindow_"+o).addClass("dragged")}}),l)&&b(document).on("click.outsideWindow",function(t){b(t.target).closest(".standart_window_ins").length||(b(".js_window_close").trigger("click"),b(document).off("click.outsideWindow"))}),m.apply(null,[i]),b(window).on("scroll resize",g),b(".js_window_close").on("click",function(){b(".js_techwindow").remove(),p.apply(null,[b(this)]),b(document).off("keydown.popupClose")}),b(document).on("keydown.popupClose",function(t){"Escape"!==t.key&&27!==t.which||b(".js_window_close").trigger("click")}),this}});